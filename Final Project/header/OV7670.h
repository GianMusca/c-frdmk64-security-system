#include <stdint.h>
#include <stdbool.h>

typedef enum{
	OV7670_GAIN = 0x00u,
	OV7670_BLUE,
	OV7670_RED,
	OV7670_VREF,
	OV7670_COM1,
	OV7670_BAVE,
	OV7670_GbAVE,
	OV7670_AECHH,
	OV7670_RAVE,
	OV7670_COM2,
	OV7670_PID,
	OV7670_VER,
	OV7670_COM3,
	OV7670_COM4,
	OV7670_COM5,
	OV7670_COM6,
	OV7670_AECH,
	OV7670_CLKRC,
	OV7670_COM7,
	OV7670_COM8,
	OV7670_COM9,
	OV7670_COM10,
	//RSVD
	OV7670_HSTART = 0x17u,
	OV7670_HSTOP,
	OV7670_VSTRT,
	OV7670_VSTOP,
	OV7670_PSHFT,
	OV7670_MIDH,
	OV7670_MIDL,
	OV7670_MVFP,
	OV7670_LAEC,
	OV7670_ADCCTR0,
	OV7670_ADCCTR1,
	OV7670_ADCCTR2,
	OV7670_ADCCTR3,
	OV7670_AEW,
	OV7670_AEB,
	OV7670_VPT,
	OV7670_BBIAS,
	OV7670_GbBIAS,
	//RSVD
	OV7670_EXHCH = 0x2Au,
	OV7670_EXHCL,
	OV7670_RBIAS,
	OV7670_ADVFL,
	OV7670_ADVFH,
	OV7670_YAVE,
	OV7670_HSYST,
	OV7670_HSYEN,
	OV7670_HREF,
	OV7670_CHLF,
	OV7670_ARBLM,
	//RSVD
	//RSVD
	OV7670_ADC = 0x3Fu,
	OV7670_ACOM,
	OV7670_OFON,
	OV7670_TSLB,
	OV7670_COM11,
	OV7670_COM12,
	OV7670_COM13,
	OV7670_COM14,
	OV7670_EDGE,
	OV7670_COM15,
	OV7670_COM16,
	OV7670_COM17,
	OV7670_AWBC1,
	OV7670_AWBC2,
	OV7670_AWBC3,
	OV7670_AWBC4,
	OV7670_AWBC5,
	OV7670_AWBC6,
	//RSVD
	//RSVD
	OV7670_REG4B = 0x4Bu,
	OV7670_DNSTH,
	//RSVD
	//RSVD
	OV7670_MTX1 = 0x4Fu,
	OV7670_MTX2,
	OV7670_MTX3,
	OV7670_MTX4,
	OV7670_MTX5,
	OV7670_MTX6,
	OV7670_BRIGHT,
	OV7670_CONTRAS,
	OV7670_CONTRAS_CENTER,
	OV7670_MTXS,
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	OV7670_LCC1 = 0x62u,
	OV7670_LCC2,
	OV7670_LCC3,
	OV7670_LCC4,
	OV7670_LCC5,
	OV7670_MANU,
	OV7670_MANV,
	OV7670_GFIX,
	OV7670_GGAIN,
	OV7670_DBLV,
	OV7670_AWBCTR3,
	OV7670_AWBCTR2,
	OV7670_AWBCTR1,
	OV7670_AWBCTR0,
	OV7670_SCALING_XSC,
	OV7670_SCALING_YSC,
	OV7670_SCALING_DCWCTR,
	OV7670_SACLING_PCLK_DIV,
	OV7670_REG74,
	OV7670_REG75,
	OV7670_REG76,
	OV7670_REG77,
	//RSVD
	//RSVD
	OV7670_SLOP = 0x7Au,
	OV7670_GAM1,
	OV7670_GAM2,
	OV7670_GAM3,
	OV7670_GAM4,
	OV7670_GAM5,
	OV7670_GAM6,
	OV7670_GAM7,
	OV7670_GAM8,
	OV7670_GAM9,
	OV7670_GAM10,
	OV7670_GAM11,
	OV7670_GAM12,
	OV7670_GAM13,
	OV7670_GAM14,
	OV7670_GAM15,
	//RSVD
	//RSVD
	OV7670_RGB444 = 0x8Cu,
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	OV7670_DM_LNL = 0x92u,
	OV7670_DM_LNH,
	OV7670_LCC6,
	OV7670_LCC7,
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	OV7670_BD50ST = 0x9Du,
	OV7670_BD60ST,
	OV7670_HAECC1,
	OV7670_HAECC2,
	//RSVD
	OV7670_SCALING_PCLK_DELAY = 0xA2u,
	//RSVD
	OV7670_NT_CTRL = 0xA4u,
	OV7670_BD50MAX,
	OV7670_HAECC3,
	OV7670_HAECC4,
	OV7670_HAECC5,
	OV7670_HAECC6,
	OV7670_HAECC7,
	OV7670_BD60MAX,
	OV7670_STR_OPT,
	OV7670_STR_R,
	OV7670_STR_G,
	OV7670_STR_B,
	//RSVD
	OV7670_ABLC1 = 0xB1u,
	//RSVD
	OV7670_THL_ST = 0xB3u,
	//RSVD
	OV7670_THL_DLT = 0xB5u,
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	OV7670_AD_CHB = 0xBEu,
	OV7670_AD_CHR,
	OV7670_AD_CHGb,
	OV7670_AD_CHGr,
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	//RSVD
	OV7670_SATCTR = 0xC9u
} OV7670_register;

typedef enum{
	OV7670_not_initialized,
	OV7670_is_ready,
	OV7670_is_busy,
	OV7670_is_taking_picture,
	OV7670_new_picture,
	OV7670_error
} OV7670_state;

typedef void (*OV7670_callback)(void);

void OV7670_Init(void);
void OV7670_Config(uint8_t* register_and_data);
OV7670_state OV7670_GetState(void);
void OV7670_TakePicture(OV7670_callback callback);
bool OV7670_GetPicture(char** picture);

void OV7670_run(void);
